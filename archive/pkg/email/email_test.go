package email

import (
	"fmt"
	"reflect"
	"testing"
	"time"
)

// full email body with comments in table
const bodyC = `<html><head></head><body><p>Your schedule for 26 Nov 2018 through to 9 Dec 2018 is shown below</p></body></html><p><html><head></head><body><table style="width:80%;" border="1" cellspacing="0"><TD bgcolor="CornflowerBlue" align="center">Day</TD><TD bgcolor="CornflowerBlue" align="center">Date</TD><TD bgcolor="CornflowerBlue" align="center">Start Work</TD><TD bgcolor="CornflowerBlue" align="center">End Work</TD><TD bgcolor="CornflowerBlue" align="center"> Total Hours </TD><TD bgcolor="CornflowerBlue" align="center"> Breaks </TD><TD bgcolor="CornflowerBlue" align="center">Pay </TD><TD bgcolor="CornflowerBlue" align="left"> Org Level </TD><TD bgcolor="CornflowerBlue" align="center"> Comments</TD><TR><TD align="center" bgcolor="White">Mon</TD><TD align="center" bgcolor="White">26 Nov</TD><TD align="center" bgcolor="White">13:45</TD><TD bgcolor="White" align="center" rowspan="1">20:00</TD><TD bgcolor="White" align="center"> 06:15 </TD><TD align="center" bgcolor="White">00:30</TD><TD align="center" bgcolor="White">05:45</TD><TD align="left" bgcolor="White">AAAA\Dry Operations\Snr CSO</TD><TD align="center" bgcolor="White">&nbsp;</TD><TR><TD align="center"bgcolor="LightBlue">Wed</TD><TD align="center" bgcolor="LightBlue">28 Nov</TD><TD align="center" bgcolor="LightBlue">13:45</TD><TD bgcolor="LightBlue" align="center" rowspan="1">21:45</TD><TD bgcolor="LightBlue" align="center"> 08:00 </TD><TD align="center" bgcolor="LightBlue">00:30</TD><TD align="center" bgcolor="LightBlue">07:30</TD><TD align="left" bgcolor="LightBlue">AAAA\Dry Operations\Snr CSO</TD><TD align="center" bgcolor="LightBlue">&nbsp;</TD><TR><TD align="center" bgcolor="White">Fri</TD><TD align="center" bgcolor="White">30 Nov</TD><TD align="center" bgcolor="White">13:45</TD><TD bgcolor="White" align="center" rowspan="1">20:00</TD><TD bgcolor="White" align="center"> 06:15 </TD><TD align="center" bgcolor="White">00:30</TD><TD align="center" bgcolor="White">05:45</TD><TD align="left" bgcolor="White">AAAA\Dry Operations\Snr CSO</TD><TD align="center" bgcolor="White">New Shift</TD><TR><TD align="center" bgcolor="LightBlue">Sat</TD><TD align="center" bgcolor="LightBlue">01 Dec</TD><TD align="center" bgcolor="LightBlue">08:15</TD><TD bgcolor="LightBlue" align="center" rowspan="1">13:15</TD><TD bgcolor="LightBlue" align="center"> 05:00 </TD><TD align="center" bgcolor="LightBlue">00:00</TD><TD align="center" bgcolor="LightBlue">05:00</TD><TD align="left" bgcolor="LightBlue">AAAA\Dry Operations\Snr CSO</TD><TD align="center" bgcolor="LightBlue">&nbsp;</TD><TR><TD align="center" bgcolor="White">Mon</TD><TD align="center" bgcolor="White">03 Dec</TD><TD align="center" bgcolor="White">05:30</TD><TD bgcolor="White" align="center" rowspan="1">14:00</TD><TD bgcolor="White" align="center"> 08:30 </TD><TD align="center" bgcolor="White">00:30</TD><TD align="center" bgcolor="White">08:00</TD><TD align="left" bgcolor="White">AAAA\DryOperations\Snr CSO</TD><TD align="center" bgcolor="White">&nbsp;</TD><TR><TD align="center" bgcolor="LightBlue">Wed</TD><TD align="center" bgcolor="LightBlue">05 Dec</TD><TD align="center" bgcolor="LightBlue">13:45</TD><TD bgcolor="LightBlue" align="center" rowspan="1">21:45</TD><TD bgcolor="LightBlue" align="center"> 08:00 </TD><TD align="center" bgcolor="LightBlue">00:30</TD><TD align="center" bgcolor="LightBlue">07:30</TD><TD align="left" bgcolor="LightBlue">AAAA\Dry Operations\Snr CSO</TD><TD align="center" bgcolor="LightBlue">&nbsp;</TD><TR><TD align="center" bgcolor="White">Fri</TD><TD align="center" bgcolor="White">07 Dec</TD><TD align="center" bgcolor="White">07:30</TD><TD bgcolor="White" align="center" rowspan="1">14:00</TD><TD bgcolor="White" align="center"> 06:30 </TD><TD align="center" bgcolor="White">00:30</TD><TD align="center" bgcolor="White">06:00</TD><TD align="left" bgcolor="White">AAAA\Dry Operations\Snr CSO</TD><TD align="center" bgcolor="White">&nbsp;</TD></table></body></html></p><p></p><html><head></head><body><p></p><p>Please find following your schedule should you have any concerns with the outlined dates and times please contact your supervisor.</p></p></body></html>`

// full email body without comments in table
const bodyN = `<html><head></head><body> <p>Your schedule for 10 Dec 2018 through to 23 Dec 2018 is shown below</p></body></html><p> <html> <head></head> <body> <table style="width:80%;" border="1" cellspacing="0"> <TD bgcolor="CornflowerBlue" align="center">Day</TD> <TD bgcolor="CornflowerBlue" align="center">Date</TD> <TD bgcolor="CornflowerBlue" align="center">Start Work</TD> <TD bgcolor="CornflowerBlue" align="center">End Work</TD> <TD bgcolor="CornflowerBlue" align="center"> Total Hours </TD> <TD bgcolor="CornflowerBlue" align="center"> Breaks </TD> <TD bgcolor="CornflowerBlue" align="center">Pay </TD> <TD bgcolor="CornflowerBlue" align="left"> Org Level </TD> <TR> <TD align="center" bgcolor="White">Mon</TD> <TD align="center" bgcolor="White">10 Dec</TD> <TD align="center" bgcolor="White">13:45</TD> <TD bgcolor="White" align="center" rowspan="1">20:00</TD> <TD bgcolor="White" align="center"> 06:15 </TD> <TD align="center" bgcolor="White">00:30</TD> <TD align="center" bgcolor="White">05:45</TD> <TD align="left" bgcolor="White">AAAA\Dry Operations\Snr CSO</TD> <TR> <TD align="center" bgcolor="LightBlue">Wed</TD> <TD align="center" bgcolor="LightBlue">12 Dec</TD> <TD align="center" bgcolor="LightBlue">09:00</TD> <TD bgcolor="LightBlue" align="center" rowspan="1">12:30</TD> <TD bgcolor="LightBlue" align="center"> 03:30 </TD> <TD align="center" bgcolor="LightBlue">00:00</TD> <TD align="center" bgcolor="LightBlue">03:30</TD> <TD align="left" bgcolor="LightBlue">AAAA\Dry Operations\Snr CSO</TD> <TR> <TD align="center" bgcolor="White">Fri</TD> <TD align="center" bgcolor="White">14 Dec</TD> <TD align="center" bgcolor="White">13:45</TD> <TD bgcolor="White" align="center" rowspan="1">20:00</TD> <TD bgcolor="White" align="center"> 06:15 </TD> <TD align="center" bgcolor="White">00:30</TD> <TD align="center" bgcolor="White">05:45</TD> <TD align="left" bgcolor="White">AAAA\Dry Operations\Snr CSO</TD> <TR> <TD align="center" bgcolor="LightBlue">Sat</TD> <TD align="center" bgcolor="LightBlue">15 Dec</TD> <TD align="center" bgcolor="LightBlue">12:00</TD> <TD bgcolor="LightBlue" align="center" rowspan="1">18:15</TD> <TD bgcolor="LightBlue" align="center"> 06:15 </TD> <TD align="center" bgcolor="LightBlue">00:00</TD> <TD align="center" bgcolor="LightBlue">06:15</TD> <TD align="left" bgcolor="LightBlue">AAAA\Dry Operations\Dry Ops Officer</TD> <TR> <TD align="center" bgcolor="White">Sun</TD> <TD align="center" bgcolor="White">16 Dec</TD> <TD align="center" bgcolor="White">13:00</TD> <TD bgcolor="White" align="center" rowspan="1">18:15</TD> <TD bgcolor="White" align="center"> 05:15 </TD> <TD align="center" bgcolor="White">00:00</TD> <TD align="center" bgcolor="White">05:15</TD> <TD align="left" bgcolor="White">AAAA\Dry Operations\Snr CSO</TD> <TR> <TD align="center" bgcolor="LightBlue">Tue</TD> <TD align="center" bgcolor="LightBlue">18 Dec</TD> <TD align="center" bgcolor="LightBlue">13:45</TD> <TD bgcolor="LightBlue" align="center" rowspan="1">21:15</TD> <TD bgcolor="LightBlue" align="center"> 07:30 </TD> <TD align="center" bgcolor="LightBlue">00:30</TD> <TD align="center" bgcolor="LightBlue">07:00</TD> <TD align="left" bgcolor="LightBlue">AAAA\Dry Operations\Snr CSO</TD> <TR> <TD align="center" bgcolor="White">Thu</TD> <TD align="center" bgcolor="White">20 Dec</TD> <TD align="center" bgcolor="White">07:30</TD> <TD bgcolor="White" align="center" rowspan="1">14:00</TD> <TD bgcolor="White" align="center"> 06:30 </TD> <TD align="center" bgcolor="White">00:30</TD> <TD align="center" bgcolor="White">06:00</TD> <TD align="left" bgcolor="White">AAAA\Dry Operations\Snr CSO</TD> <TR> <TD align="center" bgcolor="LightBlue">Fri</TD> <TD align="center" bgcolor="LightBlue">21 Dec</TD> <TD align="center" bgcolor="LightBlue">07:30</TD> <TD bgcolor="LightBlue" align="center" rowspan="1">14:00</TD> <TD bgcolor="LightBlue" align="center"> 06:30 </TD> <TD align="center" bgcolor="LightBlue">00:30</TD> <TD align="center" bgcolor="LightBlue">06:00</TD> <TD align="left" bgcolor="LightBlue">AAAA\Dry Operations\Snr CSO</TD> </table> </body> </html></p><p></p><html><head></head><body> <p></p><p>Please find following your schedule should you have any concerns with the outlined dates and times please contact your supervisor.</p></p></body></html>`

// full email body with spanned cell in table
const bodyS = `DQo8aHRtbD48aGVhZD48L2hlYWQ+PGJvZHk+PHA+WW91ciBzY2hlZHVsZSBmb3IgNCBNYXIgMjAxOSB0aHJvdWdoIHRvIDE3IE1hciAyMDE5IGlzIHNob3duIGJlbG93PC9wPjwvYm9keT48L2h0bWw+PHA+PGh0bWw+PGhlYWQ+PC9oZWFkPjxib2R5Pjx0YWJsZSBzdHlsZT0id2lkdGg6ODAlOyIgYm9yZGVyPSIxIiBjZWxsc3BhY2luZz0iMCI+PFREIGJnY29sb3I9IkNvcm5mbG93ZXJCbHVlIiBhbGlnbj0iY2VudGVyIj5EYXk8L1REPjxURCBiZ2NvbG9yPSJDb3JuZmxvd2VyQmx1ZSIgYWxpZ249ImNlbnRlciI+RGF0ZTwvVEQ+PFREIGJnY29sb3I9IkNvcm5mbG93ZXJCbHVlIiBhbGlnbj0iY2VudGVyIj5TdGFydCBXb3JrPC9URD48VEQgYmdjb2xvcj0iQ29ybmZsb3dlckJsdWUiIGFsaWduPSJjZW50ZXIiPkVuZCBXb3JrPC9URD48VEQgYmdjb2xvcj0iQ29ybmZsb3dlckJsdWUiIGFsaWduPSJjZW50ZXIiPiBUb3RhbCBIb3VycyA8L1REPjxURCBiZ2NvbG9yPSJDb3JuZmxvd2VyQmx1ZSIgYWxpZ249ImNlbnRlciI+IEJyZWFrcyA8L1REPjxURCBiZ2NvbG9yPSJDb3JuZmxvd2VyQmx1ZSIgYWxpZ249ImNlbnRlciI+UGF5OjwvVEQ+PFREIGJnY29sb3I9IkNvcm5mbG93ZXJCbHVlIiBhbGlnbj0ibGVmdCI+T3JnIExldmVsIDwvVEQ+PFRSPjxURCBhbGlnbj0iY2VudGVyIiBiZ2NvbG9yPSJXaGl0ZSI+TW9uPC9URD48VEQgYWxpZ249ImNlbnRlciIgYmdjb2xvcj0iV2hpdGUiPjA0IE1hcjwvVEQ+PFREIGJnY29sb3I9IldoaXRlIiBjb2xzcGFuPSI2Ij4gUHVibGljIEhvbGlkYXkgPC9URD48VFI+PFREIGFsaWduPSJjZW50ZXIiIGJnY29sb3I9IkxpZ2h0Qmx1ZSI+TW9uPC9URD48VEQgYWxpZ249ImNlbnRlciIgYmdjb2xvcj0iTGlnaHRCbHVlIj4wNCBNYXI8L1REPjxURCBhbGlnbj0iY2VudGVyIiBiZ2NvbG9yPSJMaWdodEJsdWUiPjEzOjE1PC9URD48VEQgYmdjb2xvcj0iTGlnaHRCbHVlIiBhbGlnbj0iY2VudGVyIiByb3dzcGFuPSIxIj4xODoxNTwvVEQ+PFREIGJnY29sb3I9IkxpZ2h0Qmx1ZSIgYWxpZ249ImNlbnRlciI+IDA1OjAwIDwvVEQ+PFREIGFsaWduPSJjZW50ZXIiIGJnY29sb3I9IkxpZ2h0Qmx1ZSI+MDA6MDA8L1REPjxURCBhbGlnbj0iY2VudGVyIiBiZ2NvbG9yPSJMaWdodEJsdWUiPjA1OjAwPC9URD48VEQgYWxpZ249ImxlZnQiIGJnY29sb3I9IkxpZ2h0Qmx1ZSI+TUFSQ1xEcnkgT3BlcmF0aW9uc1xTbnIgQ1NPPC9URD48VFI+PFREIGFsaWduPSJjZW50ZXIiIGJnY29sb3I9IldoaXRlIj5Gcmk8L1REPjxURCBhbGlnbj0iY2VudGVyIiBiZ2NvbG9yPSJXaGl0ZSI+MDggTWFyPC9URD48VEQgYWxpZ249ImNlbnRlciIgYmdjb2xvcj0iV2hpdGUiPjEzOjQ1PC9URD48VEQgYmdjb2xvcj0iV2hpdGUiIGFsaWduPSJjZW50ZXIiIHJvd3NwYW49IjEiPjIwOjAwPC9URD48VEQgYmdjb2xvcj0iV2hpdGUiIGFsaWduPSJjZW50ZXIiPiAwNjoxNSA8L1REPjxURCBhbGlnbj0iY2VudGVyIiBiZ2NvbG9yPSJXaGl0ZSI+MDA6MzA8L1REPjxURCBhbGlnbj0iY2VudGVyIiBiZ2NvbG9yPSJXaGl0ZSI+MDU6NDU8L1REPjxURCBhbGlnbj0ibGVmdCIgYmdjb2xvcj0iV2hpdGUiPk1BUkNcRHJ5IE9wZXJhdGlvbnNcU25yIENTTzwvVEQ+PFRSPjxURCBhbGlnbj0iY2VudGVyIiBiZ2NvbG9yPSJMaWdodEJsdWUiPlNhdDwvVEQ+PFREIGFsaWduPSJjZW50ZXIiIGJnY29sb3I9IkxpZ2h0Qmx1ZSI+MDkgTWFyPC9URD48VEQgYWxpZ249ImNlbnRlciIgYmdjb2xvcj0iTGlnaHRCbHVlIj4wODozMDwvVEQ+PFREIGJnY29sb3I9IkxpZ2h0Qmx1ZSIgYWxpZ249ImNlbnRlciIgcm93c3Bhbj0iMSI+MTM6MzA8L1REPjxURCBiZ2NvbG9yPSJMaWdodEJsdWUiIGFsaWduPSJjZW50ZXIiPiAwNTowMCA8L1REPjxURCBhbGlnbj0iY2VudGVyIiBiZ2NvbG9yPSJMaWdodEJsdWUiPjAwOjAwPC9URD48VEQgYWxpZ249ImNlbnRlciIgYmdjb2xvcj0iTGlnaHRCbHVlIj4wNTowMDwvVEQ+PFREIGFsaWduPSJsZWZ0IiBiZ2NvbG9yPSJMaWdodEJsdWUiPk1BUkNcRHJ5IE9wZXJhdGlvbnNcU25yIENTTzwvVEQ+PFRSPjxURCBhbGlnbj0iY2VudGVyIiBiZ2NvbG9yPSJXaGl0ZSI+V2VkPC9URD48VEQgYWxpZ249ImNlbnRlciIgYmdjb2xvcj0iV2hpdGUiPjEzIE1hcjwvVEQ+PFREIGFsaWduPSJjZW50ZXIiIGJnY29sb3I9IldoaXRlIj4wOTowMDwvVEQ+PFREIGJnY29sb3I9IldoaXRlIiBhbGlnbj0iY2VudGVyIiByb3dzcGFuPSIxIj4xMTozMDwvVEQ+PFREIGJnY29sb3I9IldoaXRlIiBhbGlnbj0iY2VudGVyIj4gMDI6MzAgPC9URD48VEQgYWxpZ249ImNlbnRlciIgYmdjb2xvcj0iV2hpdGUiPjAwOjAwPC9URD48VEQgYWxpZ249ImNlbnRlciIgYmdjb2xvcj0iV2hpdGUiPjAyOjMwPC9URD48VEQgYWxpZ249ImxlZnQiIGJnY29sb3I9IldoaXRlIj5NQVJDXERyeSBPcGVyYXRpb25zXFNuciBDU088L1REPjxUUj48VEQgYWxpZ249ImNlbnRlciIgYmdjb2xvcj0iTGlnaHRCbHVlIj5XZWQ8L1REPjxURCBhbGlnbj0iY2VudGVyIiBiZ2NvbG9yPSJMaWdodEJsdWUiPjEzIE1hcjwvVEQ+PFREIGFsaWduPSJjZW50ZXIiIGJnY29sb3I9IkxpZ2h0Qmx1ZSI+MTM6NDU8L1REPjxURCBiZ2NvbG9yPSJMaWdodEJsdWUiIGFsaWduPSJjZW50ZXIiIHJvd3NwYW49IjEiPjIwOjAwPC9URD48VEQgYmdjb2xvcj0iTGlnaHRCbHVlIiBhbGlnbj0iY2VudGVyIj4gMDY6MTUgPC9URD48VEQgYWxpZ249ImNlbnRlciIgYmdjb2xvcj0iTGlnaHRCbHVlIj4wMDozMDwvVEQ+PFREIGFsaWduPSJjZW50ZXIiIGJnY29sb3I9IkxpZ2h0Qmx1ZSI+MDU6NDU8L1REPjxURCBhbGlnbj0ibGVmdCIgYmdjb2xvcj0iTGlnaHRCbHVlIj5NQVJDXERyeSBPcGVyYXRpb25zXFNuciBDU088L1REPjxUUj48VEQgYWxpZ249ImNlbnRlciIgYmdjb2xvcj0iV2hpdGUiPkZyaTwvVEQ+PFREIGFsaWduPSJjZW50ZXIiIGJnY29sb3I9IldoaXRlIj4xNSBNYXI8L1REPjxURCBhbGlnbj0iY2VudGVyIiBiZ2NvbG9yPSJXaGl0ZSI+MDc6MzA8L1REPjxURCBiZ2NvbG9yPSJXaGl0ZSIgYWxpZ249ImNlbnRlciIgcm93c3Bhbj0iMSI+MTQ6MDA8L1REPjxURCBiZ2NvbG9yPSJXaGl0ZSIgYWxpZ249ImNlbnRlciI+IDA2OjMwIDwvVEQ+PFREIGFsaWduPSJjZW50ZXIiIGJnY29sb3I9IldoaXRlIj4wMDozMDwvVEQ+PFREIGFsaWduPSJjZW50ZXIiIGJnY29sb3I9IldoaXRlIj4wNjowMDwvVEQ+PFREIGFsaWduPSJsZWZ0IiBiZ2NvbG9yPSJXaGl0ZSI+TUFSQ1xEcnkgT3BlcmF0aW9uc1xTbnIgQ1NPPC9URD48L3RhYmxlPjwvYm9keT48L2h0bWw+PC9wPjxwPjwvcD48aHRtbD48aGVhZD48L2hlYWQ+PGJvZHk+PHA+PC9wPjxwPlBsZWFzZSBmaW5kIGZvbGxvd2luZyB5b3VyIHNjaGVkdWxlIHNob3VsZCB5b3UgaGF2ZSBhbnkgY29uY2VybnMgd2l0aCB0aGUgb3V0bGluZWQgZGF0ZXMgYW5kIHRpbWVzIHBsZWFzZSBjb250YWN0IHlvdXIgc3VwZXJ2aXNvci48L3A+PC9wPjwvYm9keT48L2h0bWw+IA0KDQpDaXR5b2ZNYW5kdXJhaEByaXRlcS5jb20uYXUNCg==`

type cases []struct {
	Description string
	Input       string
	Expect      string
}

var cas = cases{
	{
		Description: "simple string",
		Input:       "Your schedule for 24 Dec 2018 through to 6 Jan 2019 is shown below",
	},
	{
		Description: "simple string: 5 digit long year",
		Input:       "Your schedule for 24 Dec 20128 through to 6 Jan 2019 is shown below",
	},
	{
		Description: "full email body with comments in table",
		Input:       bodyC,
	},
	{
		Description: "full email body without comments in table",
		Input:       `<html><head></head><body> <p>Your schedule for 10 Dec 2018 through to 23 Dec 2018 is shown below</p></body></html><p> <html> <head></head> <body> <table style="width:80%;" border="1" cellspacing="0"> <TD bgcolor="CornflowerBlue" align="center">Day</TD> <TD bgcolor="CornflowerBlue" align="center">Date</TD> <TD bgcolor="CornflowerBlue" align="center">Start Work</TD> <TD bgcolor="CornflowerBlue" align="center">End Work</TD> <TD bgcolor="CornflowerBlue" align="center"> Total Hours </TD> <TD bgcolor="CornflowerBlue" align="center"> Breaks </TD> <TD bgcolor="CornflowerBlue" align="center">Pay </TD> <TD bgcolor="CornflowerBlue" align="left"> Org Level </TD> <TR> <TD align="center" bgcolor="White">Mon</TD> <TD align="center" bgcolor="White">10 Dec</TD> <TD align="center" bgcolor="White">13:45</TD> <TD bgcolor="White" align="center" rowspan="1">20:00</TD> <TD bgcolor="White" align="center"> 06:15 </TD> <TD align="center" bgcolor="White">00:30</TD> <TD align="center" bgcolor="White">05:45</TD> <TD align="left" bgcolor="White">AAAA\Dry Operations\Snr CSO</TD> <TR> <TD align="center" bgcolor="LightBlue">Wed</TD> <TD align="center" bgcolor="LightBlue">12 Dec</TD> <TD align="center" bgcolor="LightBlue">09:00</TD> <TD bgcolor="LightBlue" align="center" rowspan="1">12:30</TD> <TD bgcolor="LightBlue" align="center"> 03:30 </TD> <TD align="center" bgcolor="LightBlue">00:00</TD> <TD align="center" bgcolor="LightBlue">03:30</TD> <TD align="left" bgcolor="LightBlue">AAAA\Dry Operations\Snr CSO</TD> <TR> <TD align="center" bgcolor="White">Fri</TD> <TD align="center" bgcolor="White">14 Dec</TD> <TD align="center" bgcolor="White">13:45</TD> <TD bgcolor="White" align="center" rowspan="1">20:00</TD> <TD bgcolor="White" align="center"> 06:15 </TD> <TD align="center" bgcolor="White">00:30</TD> <TD align="center" bgcolor="White">05:45</TD> <TD align="left" bgcolor="White">AAAA\Dry Operations\Snr CSO</TD> <TR> <TD align="center" bgcolor="LightBlue">Sat</TD> <TD align="center" bgcolor="LightBlue">15 Dec</TD> <TD align="center" bgcolor="LightBlue">12:00</TD> <TD bgcolor="LightBlue" align="center" rowspan="1">18:15</TD> <TD bgcolor="LightBlue" align="center"> 06:15 </TD> <TD align="center" bgcolor="LightBlue">00:00</TD> <TD align="center" bgcolor="LightBlue">06:15</TD> <TD align="left" bgcolor="LightBlue">AAAA\Dry Operations\Dry Ops Officer</TD> <TR> <TD align="center" bgcolor="White">Sun</TD> <TD align="center" bgcolor="White">16 Dec</TD> <TD align="center" bgcolor="White">13:00</TD> <TD bgcolor="White" align="center" rowspan="1">18:15</TD> <TD bgcolor="White" align="center"> 05:15 </TD> <TD align="center" bgcolor="White">00:00</TD> <TD align="center" bgcolor="White">05:15</TD> <TD align="left" bgcolor="White">AAAA\Dry Operations\Snr CSO</TD> <TR> <TD align="center" bgcolor="LightBlue">Tue</TD> <TD align="center" bgcolor="LightBlue">18 Dec</TD> <TD align="center" bgcolor="LightBlue">13:45</TD> <TD bgcolor="LightBlue" align="center" rowspan="1">21:15</TD> <TD bgcolor="LightBlue" align="center"> 07:30 </TD> <TD align="center" bgcolor="LightBlue">00:30</TD> <TD align="center" bgcolor="LightBlue">07:00</TD> <TD align="left" bgcolor="LightBlue">AAAA\Dry Operations\Snr CSO</TD> <TR> <TD align="center" bgcolor="White">Thu</TD> <TD align="center" bgcolor="White">20 Dec</TD> <TD align="center" bgcolor="White">07:30</TD> <TD bgcolor="White" align="center" rowspan="1">14:00</TD> <TD bgcolor="White" align="center"> 06:30 </TD> <TD align="center" bgcolor="White">00:30</TD> <TD align="center" bgcolor="White">06:00</TD> <TD align="left" bgcolor="White">AAAA\Dry Operations\Snr CSO</TD> <TR> <TD align="center" bgcolor="LightBlue">Fri</TD> <TD align="center" bgcolor="LightBlue">21 Dec</TD> <TD align="center" bgcolor="LightBlue">07:30</TD> <TD bgcolor="LightBlue" align="center" rowspan="1">14:00</TD> <TD bgcolor="LightBlue" align="center"> 06:30 </TD> <TD align="center" bgcolor="LightBlue">00:30</TD> <TD align="center" bgcolor="LightBlue">06:00</TD> <TD align="left" bgcolor="LightBlue">AAAA\Dry Operations\Snr CSO</TD> </table> </body> </html></p><p></p><html><head></head><body> <p></p><p>Please find following your schedule should you have any concerns with the outlined dates and times please contact your supervisor.</p></p></body></html>`,
	},
}

func TestMsg(t *testing.T) {
	t.Run("ReadDate", func(t *testing.T) {
		msg := Msg{Body: bodyS}
		got, err := msg.ReadDate()
		if err != nil {
			t.Errorf("\nrecieved error: %v", err)
		}

		layout := "2 Jan 2006"
		loc, _ := time.LoadLocation("Australia/Perth")
		val1 := "4 Mar 2019"
		val2 := "17 Mar 2019"
		ti1, err := time.ParseInLocation(layout, val1, loc)
		ti2, err := time.ParseInLocation(layout, val2, loc)

		want := map[string]time.Time{
			"Start": ti1,
			"End":   ti2,
		}

		if !reflect.DeepEqual(want, got) {
			t.Fatalf("\nwant %v \ngot %v", want, got)
		}
	})

	t.Run("ReadTable", func(t *testing.T) {

	})
}

func TestReadTag(t *testing.T) {
	got := readTag(bodyC, "p", "p")
	expect := []string{"Your schedule for 26 Nov 2018 through to 9 Dec 2018 is shown below"}
	if got[0] != expect[0] {
		fmt.Println(got[0])
	}
}
